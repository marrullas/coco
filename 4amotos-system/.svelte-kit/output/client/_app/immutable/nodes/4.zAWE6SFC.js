import"../chunks/DsnmJJEf.js";import{aN as xt,W as c,aO as ge,aH as et,G as tt,aP as Pe,ao as at,a3 as rt,g as gt,a1 as ve,i as B,v as wt,j as At,ah as Et,Z as kt,_ as St,a0 as Ce,a2 as me,u as Z,au as Tt,ay as Mt,n as we,a6 as Pt,a4 as Ct,aI as zt,aC as st,B as Ht,aQ as le,a7 as nt,a8 as Lt,aR as ce,aS as Nt,aT as pe,q as it,aw as Wt,aU as Ut,aB as Dt,aV as It,ac as Ot,aW as ot,aX as ze,aY as Rt,aG as Ft,X as qt,aZ as Bt,p as Jt,f as F,h as Kt,s as I,a as j,t as K,b as L,c as Vt,$ as Gt,d as q,a_ as Qt,r as D,aL as W,aM as ne,aK as He,ab as Le}from"../chunks/D59KID4S.js";import{o as Xt,d as Yt,e as Zt,s as $}from"../chunks/BW75B2R1.js";import{p as jt,i as X}from"../chunks/uK8-taIZ.js";import{r as $t,a as Ne,s as We}from"../chunks/BdZKL7sh.js";import{t as ea,c as ta}from"../chunks/BRzKQYUk.js";import{i as aa,a as ra,b as sa,c as na}from"../chunks/DXozKfF2.js";function ia(t){let e=0,r=ge(0),i;return()=>{xt()&&(c(r),et(()=>(e===0&&(i=tt(()=>t(()=>Pe(r)))),e+=1,()=>{at(()=>{e-=1,e===0&&(i?.(),i=void 0,Pe(r))})})))}}function oa(t,e){return e}function la(t,e,r){for(var i=t.items,n=[],u=e.length,o=0;o<u;o++)Ut(e[o].e,n,!0);var f=u>0&&n.length===0&&r!==null;if(f){var y=r.parentNode;Dt(y),y.append(r),i.clear(),R(t,e[0].prev,e[u-1].next)}It(n,()=>{for(var g=0;g<u;g++){var A=e[g];f||(i.delete(A.k),R(t,A.prev,A.next)),it(A.e,!f)}})}function ie(t,e,r,i,n,u=null){var o=t,f={flags:e,items:new Map,first:null},y=(e&ot)!==0;if(y){var g=t;o=B?ve(wt(g)):g.appendChild(rt())}B&&At();var A=null,z=!1,S=new Map,M=Et(()=>{var b=r();return Ht(b)?b:b==null?[]:st(b)}),l,v;function p(){ca(v,l,f,S,o,n,e,i,r),u!==null&&(l.length===0?A?nt(A):A=we(()=>u(o)):A!==null&&Lt(A,()=>{A=null}))}gt(()=>{v??=Ot,l=c(M);var b=l.length;if(z&&b===0)return;z=b===0;let P=!1;if(B){var m=kt(o)===St;m!==(b===0)&&(o=Ce(),ve(o),me(!1),P=!0)}if(B){for(var _=null,x,a=0;a<b;a++){if(Z.nodeType===Tt&&Z.data===Mt){o=Z,P=!0,me(!1);break}var s=l[a],d=i(s,a);x=Ae(Z,f,_,null,s,d,a,n,e,r),f.items.set(d,x),_=x}b>0&&ve(Ce())}if(B)b===0&&u&&(A=we(()=>u(o)));else if(Pt()){var w=new Set,k=Ct;for(a=0;a<b;a+=1){s=l[a],d=i(s,a);var E=f.items.get(d)??S.get(d);E?(e&(ce|le))!==0&&lt(E,s,a,e):(x=Ae(null,f,null,null,s,d,a,n,e,r,!0),S.set(d,x)),w.add(d)}for(const[h,H]of f.items)w.has(h)||k.skipped_effects.add(H.e);k.add_callback(p)}else p();P&&me(!0),c(M)}),B&&(o=Z)}function ca(t,e,r,i,n,u,o,f,y){var g=(o&Rt)!==0,A=(o&(ce|le))!==0,z=e.length,S=r.items,M=r.first,l=M,v,p=null,b,P=[],m=[],_,x,a,s;if(g)for(s=0;s<z;s+=1)_=e[s],x=f(_,s),a=S.get(x),a!==void 0&&(a.a?.measure(),(b??=new Set).add(a));for(s=0;s<z;s+=1){if(_=e[s],x=f(_,s),a=S.get(x),a===void 0){var d=i.get(x);if(d!==void 0){i.delete(x),S.set(x,d);var w=p?p.next:l;R(r,p,d),R(r,d,w),he(d,w,n),p=d}else{var k=l?l.e.nodes_start:n;p=Ae(k,r,p,p===null?r.first:p.next,_,x,s,u,o,y)}S.set(x,p),P=[],m=[],l=p.next;continue}if(A&&lt(a,_,s,o),(a.e.f&pe)!==0&&(nt(a.e),g&&(a.a?.unfix(),(b??=new Set).delete(a))),a!==l){if(v!==void 0&&v.has(a)){if(P.length<m.length){var E=m[0],h;p=E.prev;var H=P[0],C=P[P.length-1];for(h=0;h<P.length;h+=1)he(P[h],E,n);for(h=0;h<m.length;h+=1)v.delete(m[h]);R(r,H.prev,C.next),R(r,p,H),R(r,C,E),l=E,p=C,s-=1,P=[],m=[]}else v.delete(a),he(a,l,n),R(r,a.prev,a.next),R(r,a,p===null?r.first:p.next),R(r,p,a),p=a;continue}for(P=[],m=[];l!==null&&l.k!==x;)(l.e.f&pe)===0&&(v??=new Set).add(l),m.push(l),l=l.next;if(l===null)continue;a=l}P.push(a),p=a,l=a.next}if(l!==null||v!==void 0){for(var U=v===void 0?[]:st(v);l!==null;)(l.e.f&pe)===0&&U.push(l),l=l.next;var N=U.length;if(N>0){var T=(o&ot)!==0&&z===0?n:null;if(g){for(s=0;s<N;s+=1)U[s].a?.measure();for(s=0;s<N;s+=1)U[s].a?.fix()}la(r,U,T)}}g&&at(()=>{if(b!==void 0)for(a of b)a.a?.apply()}),t.first=r.first&&r.first.e,t.last=p&&p.e;for(var V of i.values())it(V.e);i.clear()}function lt(t,e,r,i){(i&ce)!==0&&ze(t.v,e),(i&le)!==0?ze(t.i,r):t.i=r}function Ae(t,e,r,i,n,u,o,f,y,g,A){var z=(y&ce)!==0,S=(y&Nt)===0,M=z?S?zt(n,!1,!1):ge(n):n,l=(y&le)===0?o:ge(o),v={i:l,v:M,k:u,a:null,e:null,prev:r,next:i};try{if(t===null){var p=document.createDocumentFragment();p.append(t=rt())}return v.e=we(()=>f(t,M,l,g),B),v.e.prev=r&&r.e,v.e.next=i&&i.e,r===null?A||(e.first=v):(r.next=v,r.e.next=v.e),i!==null&&(i.prev=v,i.e.prev=v.e),v}finally{}}function he(t,e,r){for(var i=t.next?t.next.e.nodes_start:r,n=e?e.e.nodes_start:r,u=t.e.nodes_start;u!==null&&u!==i;){var o=Wt(u);n.before(u),u=o}}function R(t,e,r){e===null?t.first=r:(e.next=r,e.e.next=r&&r.e),r!==null&&(r.prev=e,r.e.prev=e&&e.e)}function Ue(t,e,r){Ft(()=>{var i=tt(()=>e(t,r?.())||{});if(r&&i?.update){var n=!1,u={};et(()=>{var o=r();qt(o),n&&Bt(u,o)&&(u=o,i.update(o))}),n=!0}if(i?.destroy)return()=>i.destroy()})}function ee(t,e,r,i,n,u){var o=t.__className;if(B||o!==r||o===void 0){var f=ea(r,i,u);(!B||f!==t.getAttribute("class"))&&(f==null?t.removeAttribute("class"):t.className=f),t.__className=r}else if(u&&n!==u)for(var y in u){var g=!!u[y];(n==null||g!==!!n[y])&&t.classList.toggle(y,g)}return u}class da{#e;#t;constructor(e,r){this.#e=e,this.#t=ia(r)}get current(){return this.#t(),this.#e()}}const ua=/\(.+\)/,fa=new Set(["all","print","screen","and","or","not","only"]);class va extends da{constructor(e,r){let i=ua.test(e)||e.split(/[\s,]+/).some(u=>fa.has(u.trim()))?e:`(${e})`;const n=window.matchMedia(i);super(()=>n.matches,u=>Xt(n,"change",u))}}function ma(t){const e=JSON.parse(t);return e.data&&(e.data=sa(e.data,na.decoders)),e}function ye(t){return HTMLElement.prototype.cloneNode.call(t)}function pa(t,e=()=>{}){const r=async({action:n,result:u,reset:o=!0,invalidateAll:f=!0})=>{u.type==="success"&&(o&&HTMLFormElement.prototype.reset.call(t),f&&await aa()),(location.origin+location.pathname===n.origin+n.pathname||u.type==="redirect"||u.type==="error")&&await ra(u)};async function i(n){if((n.submitter?.hasAttribute("formmethod")?n.submitter.formMethod:ye(t).method)!=="post")return;n.preventDefault();const o=new URL(n.submitter?.hasAttribute("formaction")?n.submitter.formAction:ye(t).action),f=n.submitter?.hasAttribute("formenctype")?n.submitter.formEnctype:ye(t).enctype,y=new FormData(t),g=n.submitter?.getAttribute("name");g&&y.append(g,n.submitter?.getAttribute("value")??"");const A=new AbortController;let z=!1;const M=await e({action:o,cancel:()=>z=!0,controller:A,formData:y,formElement:t,submitter:n.submitter})??r;if(z)return;let l;try{const v=new Headers({accept:"application/json","x-sveltekit-action":"true"});f!=="multipart/form-data"&&v.set("Content-Type",/^(:?application\/x-www-form-urlencoded|text\/plain)$/.test(f)?f:"application/x-www-form-urlencoded");const p=f==="multipart/form-data"?y:new URLSearchParams(y),b=await fetch(o,{method:"POST",headers:v,cache:"no-store",body:p,signal:A.signal});l=ma(await b.text()),l.type==="error"&&(l.status=b.status)}catch(v){if(v?.name==="AbortError")return;l={type:"error",error:v}}await M({action:o,formData:y,formElement:t,update:v=>r({action:o,result:l,reset:v?.reset,invalidateAll:v?.invalidateAll}),result:l})}return HTMLFormElement.prototype.addEventListener.call(t,"submit",i),{destroy(){HTMLFormElement.prototype.removeEventListener.call(t,"submit",i)}}}var De="mz3PUW_p",Ie=["#FFC700","#FF0000","#2E3191","#41BBC7"],Oe=3500,Re=.5,Fe=150,qe="mix",Be=12,Je="",Ke=!0,Ve=800,Ge=1600;function ha(t,e={}){let{colors:r=Ie,duration:i=Oe,force:n=Re,particleCount:u=Fe,particleShape:o=qe,particleSize:f=Be,particleClass:y=Je,destroyAfterDone:g=Ke,stageHeight:A=Ve,stageWidth:z=Ge}=e;(function(m){if(document.querySelector("style[data-neoconfetti]"))return;const _=_e("style");_.dataset.neoconfetti="",_.textContent=m,be(document.head,_)})('@keyframes mz3PUW_ya{to{translate:0 var(--sh)}}@keyframes mz3PUW_xa{to{translate:var(--xlp)0}}@keyframes mz3PUW_r{50%{rotate:var(--hr)180deg}to{rotate:var(--r)360deg}}.mz3PUW_c{z-index:1200;width:0;height:0;position:relative;overflow:visible}.mz3PUW_p{animation:xa var(--dc)forwards cubic-bezier(var(--x1),var(--x2),var(--x3),var(--x4));animation-name:mz3PUW_xa}.mz3PUW_p>div{animation:ya var(--dc)forwards cubic-bezier(var(--y1),var(--y2),var(--y3),var(--y4));width:var(--w);height:var(--h);animation-name:mz3PUW_ya;position:absolute;top:0;left:0}.mz3PUW_p>div:before{content:"";background-color:var(--bgc);animation:r var(--rd)infinite linear;border-radius:var(--br);width:100%;height:100%;animation-name:mz3PUW_r;display:block}'),t.classList.add("mz3PUW_c"),t.style.setProperty("--sh",A+"px");let S=[],M=[];const l=()=>te(O()*(ga-1)),v=(m,_)=>o!=="rectangles"&&(m==="circles"||wa(_));function p(m,_){const x=l(),a=v(o,x),s=(k,E)=>m.style.setProperty(k,E+"");s("--xlp",xe(oe(Ze(_,90)-180),0,180,-z/2,z/2)+"px"),s("--dc",i-te(1e3*O())+"ms");const d=O()<_a?Y(O()*ba,2):0;s("--x1",d),s("--x2",-1*d),s("--x3",d),s("--x4",Y(oe(xe(oe(Ze(_,90)-180),0,180,-1,1)),4)),s("--y1",Y(O()*Xe,4)),s("--y2",Y(O()*n*(ct()?1:-1),4)),s("--y3",Xe),s("--y4",Y(xa(xe(oe(_-180),0,180,n,-n),0),4)),s("--w",(a?f:te(4*O())+f/2)+"px"),s("--h",(a?f:te(2*O())+f)+"px");const w=x.toString(2).padStart(3,"0").split("");s("--hr",w.map((k=>+k/2+"")).join(" ")),s("--r",w.join(" ")),s("--rd",Y(O()*(ya-Qe)+Qe)+"ms"),s("--br",a?"50%":0)}let b;function P(){t.innerHTML="",clearTimeout(b),S=Ye(u,r),M=(function(m,_=[],x){const a=[];for(const{color:s}of _){const d=_e("div");d.className=`${De} ${x}`,d.style.setProperty("--bgc",s);const w=_e("div");be(d,w),be(m,d),a.push(d)}return a})(t,S,y);for(const[m,_]of je(M))p(_,S[+m].degree);b=setTimeout((()=>{g&&(t.innerHTML="")}),i)}return P(),{update(m){const _=m.particleCount??Fe,x=m.particleShape??qe,a=m.particleSize??Be,s=m.particleClass??Je,d=m.colors??Ie,w=m.stageHeight??Ve,k=m.duration??Oe,E=m.force??Re,h=m.stageWidth??Ge,H=m.destroyAfterDone??Ke;S=Ye(_,d);let C=!1;if(_===u){M=Array.from(t.querySelectorAll(`.${De}`));for(const[U,{color:N}]of je(S)){const T=M[+U];JSON.stringify(r)!==JSON.stringify(d)&&T.style.setProperty("--bgc",N),x!==o&&T.style.setProperty("--br",v(x,l())?"50%":"0"),s!==y&&(y&&T.classList.remove(y),s&&T.classList.add(s))}}else C=!0;g&&!H&&clearTimeout(b),t.style.setProperty("--sh",w+"px"),i=k,r=d,n=E,u=_,o=x,f=a,y=s,g=H,A=w,z=h,C&&P()},destroy(){t.innerHTML="",clearTimeout(b)}}}var Qe=200,ya=800,_a=.1,ba=.3,Xe=.5,oe=Math.abs,O=Math.random,te=Math.round,xa=Math.max,_e=t=>document.createElement(t),be=(t,e)=>t.appendChild(e),Ye=(t,e)=>Array.from({length:t},((r,i)=>({color:e[i%e.length],degree:360*i/t}))),Y=(t,e=2)=>te((t+Number.EPSILON)*10**e)/10**e,xe=(t,e,r,i,n)=>(t-e)*(n-i)/(r-e)+i,Ze=(t,e)=>t+e>360?t+e-360:t+e,ct=()=>O()>.5,je=Object.entries,ga=6,wa=t=>t!==1&&ct();function $e(t,e,r){t.preventDefault();const i=t.target.getAttribute("data-key");i==="backspace"?(Le(e,c(e).slice(0,-1)),r()?.badGuess&&r(r().badGuess=!1,!0)):c(e).length<5&&Le(e,c(e)+i)}var Aa=F('<meta name="description" content="A Wordle clone written in SvelteKit" class="svelte-115oxdy"/>'),Ea=F('<div> <span class="visually-hidden svelte-115oxdy"><!></span> <input name="guess" type="hidden" class="svelte-115oxdy"/></div>'),ka=F('<h2 class="visually-hidden svelte-115oxdy"> </h2> <div></div>',1),Sa=F('<p class="svelte-115oxdy"> </p>'),Ta=F('<!> <button data-key="enter" class="restart selected svelte-115oxdy" formaction="?/restart"> </button>',1),Ma=F('<button formaction="?/update" name="key"> </button>'),Pa=F('<div class="row svelte-115oxdy"></div>'),Ca=F('<div class="keyboard svelte-115oxdy"><button data-key="enter">enter</button> <button data-key="backspace" formaction="?/update" name="key" value="backspace" class="svelte-115oxdy">back</button> <!></div>'),za=F('<div style="position: absolute; left: 50%; top: 30%" class="svelte-115oxdy"></div>'),Ha=F('<h1 class="visually-hidden svelte-115oxdy">Sverdle</h1> <form method="post" action="?/enter" class="svelte-115oxdy"><a class="how-to-play svelte-115oxdy" href="/sverdle/how-to-play">How to play</a> <div></div> <div class="controls svelte-115oxdy"><!></div></form> <!>',1);function Ra(t,e){Jt(e,!0);let r=jt(e,"form",15);const i=new va("(prefers-reduced-motion: reduce)");let n=W(()=>e.data.answers.at(-1)==="xxxxx"),u=W(()=>c(n)?-1:e.data.answers.length),o=W(()=>e.data.guesses[c(u)]||""),f=W(()=>c(o).length===5);const y=W(()=>{let a={},s={};return e.data.answers.forEach((d,w)=>{const k=e.data.guesses[w];for(let E=0;E<5;E+=1){const h=k[E];d[E]==="x"?(a[h]="exact",s[h]="correct"):a[h]||(a[h]=d[E]==="c"?"close":"missing",s[h]=d[E]==="c"?"present":"absent")}}),{classnames:a,description:s}}),g=W(()=>c(y).classnames),A=W(()=>c(y).description);function z(a){a.metaKey||a.key==="Enter"&&!c(f)||document.querySelector(`[data-key="${a.key}" i]`)?.dispatchEvent(new MouseEvent("click",{cancelable:!0,bubbles:!0}))}var S=Ha();Zt("keydown",Qt,z),Kt(a=>{var s=Aa();Gt.title="Sverdle",L(a,s)});var M=I(j(S),2),l=I(q(M),2);let v;ie(l,20,()=>Array.from(Array(6).keys()),a=>a,(a,s)=>{const d=W(()=>s===c(u));var w=ka(),k=j(w),E=q(k);D(k);var h=I(k,2);let H;ie(h,20,()=>Array.from(Array(5).keys()),C=>C,(C,U)=>{const N=W(()=>c(d)?c(o):e.data.guesses[s]),T=W(()=>e.data.answers[s]?.[U]),V=W(()=>c(N)?.[U]??""),dt=W(()=>c(d)&&U===c(N).length),Ee=W(()=>c(T)==="x"),ke=W(()=>c(T)==="c"),Se=W(()=>c(T)==="_");var ae=Ea();let Te;var Me=q(ae),de=I(Me),ut=q(de);{var ft=J=>{var re=ne("(correct)");L(J,re)},vt=J=>{var re=He(),mt=j(re);{var pt=G=>{var se=ne("(present)");L(G,se)},ht=G=>{var se=He(),yt=j(se);{var _t=Q=>{var fe=ne("(absent)");L(Q,fe)},bt=Q=>{var fe=ne("empty");L(Q,fe)};X(yt,Q=>{c(Se)?Q(_t):Q(bt,!1)},!0)}L(G,se)};X(mt,G=>{c(ke)?G(pt):G(ht,!1)},!0)}L(J,re)};X(ut,J=>{c(Ee)?J(ft):J(vt,!1)})}D(de);var ue=I(de,2);$t(ue),D(ae),K(J=>{Te=ee(ae,1,"letter svelte-115oxdy",null,Te,J),$(Me,`${c(V)??""} `),ue.disabled=!c(d),Ne(ue,c(V))},[()=>({exact:c(Ee),close:c(ke),missing:c(Se),selected:c(dt)})]),L(C,ae)}),D(h),K(C=>{$(E,`Row ${s+1}`),H=ee(h,1,"row svelte-115oxdy",null,H,C)},[()=>({current:c(d)})]),L(a,w)}),D(l);var p=I(l,2),b=q(p);{var P=a=>{var s=Ta(),d=j(s);{var w=h=>{var H=Sa(),C=q(H);D(H),K(()=>$(C,`the answer was "${e.data.answer??""}"`)),L(h,H)};X(d,h=>{!c(n)&&e.data.answer&&h(w)})}var k=I(d,2),E=q(k);D(k),K(()=>$(E,`${c(n)?"you won :)":"game over :("} play again?`)),L(a,s)},m=a=>{var s=Ca(),d=q(s);let w;var k=I(d,2);k.__click=[$e,o,r];var E=I(k,2);ie(E,16,()=>["qwertyuiop","asdfghjkl","zxcvbnm"],h=>h,(h,H)=>{var C=Pa();ie(C,21,()=>H,oa,(U,N)=>{var T=Ma();T.__click=[$e,o,r];var V=q(T,!0);D(T),K(()=>{We(T,"data-key",c(N)),ee(T,1,ta(c(g)[c(N)]),"svelte-115oxdy"),T.disabled=c(f),Ne(T,c(N)),We(T,"aria-label",`${c(N)??""} ${(c(A)[c(N)]||"")??""}`),$(V,c(N))}),L(U,T)}),D(C),L(h,C)}),D(s),K(h=>{d.disabled=!c(f),w=ee(d,1,"svelte-115oxdy",null,w,h)},[()=>({selected:c(f)})]),L(a,s)};X(b,a=>{c(n)||e.data.answers.length>=6?a(P):a(m,!1)})}D(p),D(M),Ue(M,(a,s)=>pa?.(a,s),()=>()=>({update:a})=>{a({reset:!1})});var _=I(M,2);{var x=a=>{var s=za();Ue(s,(d,w)=>ha?.(d,w),()=>({particleCount:i.current?0:void 0,force:.7,stageWidth:window.innerWidth,stageHeight:window.innerHeight,colors:["#ff3e00","#40b3ff","#676778"]})),L(a,s)};X(_,a=>{c(n)&&a(x)})}K(a=>v=ee(l,1,"grid svelte-115oxdy",null,v,a),[()=>({playing:!c(n),"bad-guess":r()?.badGuess})]),L(t,S),Vt()}Yt(["click"]);export{Ra as component};
